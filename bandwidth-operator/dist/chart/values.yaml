# Configure the vaclab bandwidth-operator manager deployment
manager:
  # Bandwidth configuration
  bandwidth:
    # Default local (OVS/bridge) bandwidth limits in Mbps
    local:
      uplink: 20000    # 20 Gbps
      downlink: 20000  # 20 Gbps
    # Default network (physical NIC) bandwidth limits in Mbps
    network:
      uplink: 1000     # 1 Gbps
      downlink: 1000   # 1 Gbps

  # Pod bandwidth annotations (CNI-specific)
  # For KubeOVN (default):
  annotations:
    egress: "ovn.kubernetes.io/egress_rate"
    ingress: "ovn.kubernetes.io/ingress_rate"
  # For standard Kubernetes CNI plugins (Calico, Cilium, etc.), use:
  # annotations:
  #   egress: "kubernetes.io/egress-bandwidth"
  #   ingress: "kubernetes.io/ingress-bandwidth"

  # Enable leader election for high availability
  leaderElection:
    enabled: false

  # Arguments - automatically generated from bandwidth and annotations config
  # You can add custom args here if needed
  args: []

  # Environment variables
  env: []

  # Pod-level security settings
  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
        type: RuntimeDefault

  # Container-level security settings
  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
        drop:
            - ALL
    readOnlyRootFilesystem: true

  # Resource limits and requests
  resources:
    limits:
        cpu: 500m
        memory: 128Mi
    requests:
        cpu: 10m
        memory: 64Mi

# Essential RBAC permissions (required for controller operation)
# These include ServiceAccount, controller permissions, leader election, and metrics access
# Note: Essential RBAC is always enabled as it's required for the controller to function

# Helper RBAC roles for managing custom resources
# These provide convenient admin/editor/viewer roles for each CRD type
# Useful for giving users different levels of access to your custom resources
rbacHelpers:
  enable: false  # Install convenience admin/editor/viewer roles for CRDs

# Custom Resource Definitions
crd:
  enable: true  # Install CRDs with the chart
  keep: true    # Keep CRDs when uninstalling

# Controller metrics endpoint.
# Enable to expose /metrics endpoint with RBAC protection.
metrics:
  enable: true
  port: 8443  # Metrics server port

# Cert-manager integration for TLS certificates.
# Required for webhook certificates and metrics endpoint certificates.
certManager:
  enable: false

# Prometheus ServiceMonitor for metrics scraping.
# Requires prometheus-operator to be installed in the cluster.
prometheus:
  enable: false

