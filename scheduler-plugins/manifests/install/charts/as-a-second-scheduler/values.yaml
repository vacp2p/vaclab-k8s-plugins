# Default values for scheduler-plugins-as-a-second-scheduler.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

scheduler:
  name: vaclab-scheduler
  image: katakuri100/vaclab-scheduler:v0.30.6-1
  command:
  - /bin/kube-scheduler
  replicaCount: 1
  leaderElect: true
  priorityClassName: ""
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  nodeSelector: {}
  affinity: {}
  tolerations: []

controller:
  name: vaclab-scheduler-controller
  image: katakuri100/vaclab-scheduler-controller:v0.30.6-1
  replicaCount: 1
  leaderElect: false
  priorityClassName: ""
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  nodeSelector: {}
  affinity: {}
  tolerations: []

# LoadVariationRiskBalancing and TargetLoadPacking are not enabled by default
# as they need extra RBAC privileges on metrics.k8s.io.

plugins:
  enabled: ["VaclabScheduling"]
  disabled: [] # only in-tree plugins need to be defined here
  # Score weight for VaclabScheduling plugin (higher = more influence)
  # Default 100 makes bandwidth the dominant factor in scheduling decisions
  scoreWeight: 100

# Customize the enabled plugins' config.
# Refer to the "pluginConfig" section of manifests/<plugin>/scheduler-config.yaml.
# VaclabScheduling plugin configuration for bandwidth-aware scheduling
pluginConfig:
- name: VaclabScheduling
  args:
    apiVersion: kubescheduler.config.k8s.io/v1
    kind: VaclabSchedulingArgs
    egressBandwidthAnnotation: ovn.kubernetes.io/egress_rate
    ingressBandwidthAnnotation: ovn.kubernetes.io/ingress_rate
    defaultEgressMbps: 20
    defaultIngressMbps: 20
#    defaultProfileName: "full-seccomp"
